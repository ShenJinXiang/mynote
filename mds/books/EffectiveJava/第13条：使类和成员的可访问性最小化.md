# 第13条：使类和成员的可访问性最小化
要区别设计良好的模块与设计不好的模块，最重要的因素在于，这个模式对于外部的其他模块而言，是否隐藏其内部数据和其他实现细节。设计良好的模块会隐藏所有的实现细节，把它的API与它的实现清晰地隔离开来。然后，模块之间指通过它们的API进行通信，一个模块不需要知道其他模块的内部工作清空。这个概念被成为信息隐藏或者封装，是软件设计的基本原则之一。

信息隐藏之所以非常重要有很多原因，其中大多数理由都源于这样一个事实：它可以有效地解除组成系统的个模块之间的耦合关系，使得这些模块可以独立地开发、测试、优化、使用、理解和修改。这样可以加快系统开发的速度，因为这些模块可以并行开发。这也减轻了维护的负担，因为程序员可以更快的理解这些模块，并且，在调试它们的时候可以不影响其他第调节性能：一旦完成了一个系统，并通过剖析确定了那些模块影响了系统的性能，那些模块就可以被进一步优化，而不会影响到其他模块的正确性。信息隐藏提高了软件的可重用性，因为模块之间并不紧密相连，除了开发这些模块所使用的环境之外，它们在其他的环境中往往也很有用。最后，信息隐藏也降低了构建大型系统的风险，因为即使整个系统不可用，但是这些独立的模块却有可能是可用的。

Java程序设计语言提高了许多机制来协助信息隐藏。访问控制机制决定了类、接口和成员的可访问性。实例的可访问性是由该实体声明所在的为止，以及该实体声明所出现的访问修饰符共同决定的。正确滴使用这些修饰符对于实现信息隐藏是非常关键的。

第一规则很简单：*尽可能地使每个类或者成员不被外界访问*。换句话说，应该使用与你正在编写的软件的对于功能相一致的、尽可能最小的访问级别。

对于顶层类和接口，只有两种可能的访问级别：包极私有的和公有的。如果你用public修饰符声明了顶层类或者接口，那么它就是公有的；否则，它将是包级私有的。如果类或者接口能够被做成包级私有的，它就应该被做成包级私有。通过把类或者接口做成包级私有，它实际上成了这个包的实现的一部分，而不是该包导出的API的一部分，在以后的发行版本中，可以对它进行修改、替换，或者删除，而无需担心会影响到现有的客户端程序。如果你把它做成公有的，你就有责任用于支持它，以保持它的兼容性。

如果一个包级私有的顶层类值是在某一个类的内部被用到，就应该考虑使它成为唯一使用它的哪个类的私有嵌套类。这样可以将它的可访问范围从包中所有类缩小到使用它的那个类。然后，降低不必要公有类的可访问性，比降低包级私有的顶层类要更重要的多：因为公有类是包的API的一部分，而包级私有的顶层类已经是这个包的实现的一部分。

对于成员（域、方法、嵌套类和嵌套接口）有四种可能的访问级别，下面按照可访问性的递增顺序罗列出来：

* 私有的（private）—— 只有在声明该成员的顶层类内部才可以访问这个成员。
* 包级私有的（package-private）—— 声明该成员的包内部的任何类都可以访问这个成员。从技术上将，它被称为“缺省”的访问级别，如果没有成为成员指定访问修饰符，就采用这个访问级别。
* 受保护的（protected）—— 声明该成员的类的子类可以访问这个成员，并且声明该成员的包内部的任何类也可以访问这个成员。
* 公有的（public）—— 在任何地方都可以访问该成员。

当你仔细地设计了公有API之后，可能觉得应该把所有其他的成员都变成私有的。其实，只有当同一个包内的另一个类真正需要访问一个成员的时候，你才应该删除private修饰符，是该成员变成包级私有。如果你发现自己经常要做这样的事情，就应该重新坚持你的系统设计，看看另一种凤姐方案所得到的类，域其他类的耦合度会更小。也就是说，私有成员和包级私有成员都是一个类的实现的一部分，一般不会影响它的导出的API。然后，如果这个类实现了Serializable接口，这些域就可能被泄漏到导出的API中。

对于公有类的成员，当访问级别从包级私有变成保护级别时，会大大增强可访问性。受保护的成员是类的导出的API的一部分，必须用于得到支持。导出的类的受保护成员也代表了该类对于某个实现细节的公开承若。受保护的成员应该尽量少用。
