# 第四章 控制执行流程

> 就像有知觉的生物一样，程序必须在执行过程中控制它的世界，并做出选择。在Java中，你要使用执行控制语句来做出选择

Java使用了C的所有流程控制语句，所以如果读者以前用过C或C++编程，那么应该非常熟悉了。大多数过程型编程语言都具有某些形式的控制语句，它们通常在各种语言之间是交迭的。在Java中，涉及的关键包括`if-else`、`while`、`do-while`、`for`、`return`、`break`以及选择语句`switch`。然后Java并不支持`goto`语句（该语句引起许多反对一件，但他仍是解决某些特殊问题的最便利的方法）。在Java中，仍然可以进行类似`goto`那样的跳转，但比起典型的`goto`，有了很多限制。

## 4.1 true和false
所有条件语句都利用条件表达式的真或假来决定执行路径。这里有一个条件表达式的例子：`a == b`。它用条件操作赋`==`来判断`a`值是否等于`b`值。该表达式返回`true`或`false`。在本章前面介绍的所有关系操作符，都可拿来构造条件语句。注意Java不允许我们将一个数字作为布尔值使用，虽然这在C和C++里是允许的（在这些语言里，“真”是非零，而“假”是零）。如果想再布尔测试中使用一个非布尔值，比如在`if(a)`中，那么首先必须用一个条件表达式将其转换成布尔值，例如`if(a != 0)`。

## if-else
if-else语句是控制程序流程的最基本的形式。其中的else是可选的，所以可按下述两种形式来使用if：

```java
if (Boolean-expression)
    statement
```

或

```java
if (Boolean-expression)
	statement
else
	statement
```

布尔表达式不许产生一个布尔结果，statement只用分号结尾的简单语句，或复合语句————封闭在花括号内的一组简单语句。在本书任何地方，只要提及“语句”这个词，就指的是简单语句或复合语句。

作为if-else的一个例子，下面的`test()`方法可以告诉您，您猜的数是大于、小于还是等于目标数：

```java
//: control/IfElse.java
import static net.mindview.util.Print.*;

public class IfElse {
	static int result = 0;
	static void test(int testval, int target) {
		if (testval > target)
			result =+ 1;
		else if (testval < target) 
			result = -1;
		else 
			result = 0; // Match
	}

	public static void main(String[] args) {
		test(10, 5);
		print(result);
		test(5, 10);
		print(result);
		test(5, 5);
		print(result);
	}
} /* Output:
1
-1
0
*///:~
```

在`test()`的中间部分，可以看到一个“else if”，那并非新的关键字，而仅仅只是一个else后面紧跟另一个新的if语句。

尽管Java与它之前产生的C和C++一样，都是“格式自由”的语言，但是习惯上还是将流程控制语句的主体部分缩进排列，使读者能方便地确定起始与终止。

## 4.3 迭代
**while**、**do-while**和**for**用来控制循环，有时将它们划分为*迭代语句*（iteration statement）。语句会重复执行，知道起控制作用的*布尔表达式*（Booleanexpression）得到“假”的结果为止。**while**循环的格式如下：

```java
while(Boolean-expression)
	statement
```

在循环刚开始时，会计算一次布尔表达式的值；而在语句的下一次迭代开始前会再计算一次。

下面这个简答的例子可产生随机数，知道符合特定的条件为止：

```java
//: control/WhileTest.java
// Demonstrates the while loop.

public class WhileTest {
	static boolean condition() {
		boolean result = Math.random() < 0.99;
		System.out.print(result + ". ");
		return result;
	}

	public static void main(String[] args) {
		while(condition())
			System.out.println("Inside 'while'");
		System.out.println("Exited 'while'");
	}
} /* (Execute to see output) *///:~
```

condition()方法用到了Math库里的`static`（静态）方法`random()`，该方法的作用是产生0和1之间（包括0，但不包括1）的`double`值。`result`的值是通过比较操作符`<`而得到它，这个操作符将产生`boolean`类型的结果。在打印`boolean`类型的值时，将自动地得到适合的字符串`true`或`false`。`while`的条件表达式意思是说：“只要condition()返回true，就重复执行循环体中的语句”。

### 4.3.1 do-while
do-while的格式如下：

```java
do statement
while (Boolean-expression);
```


